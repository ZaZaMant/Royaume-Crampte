[gd_scene load_steps=27 format=4 uid="uid://r26p4me684tv"]

[ext_resource type="Script" uid="uid://d4dmutullb65h" path="res://elements/entities/player/player.gd" id="1_symyc"]
[ext_resource type="PackedScene" uid="uid://b7rturmp358io" path="res://elements/components/heath_component.tscn" id="2_wgaw1"]
[ext_resource type="PackedScene" uid="uid://cn008mb8us4va" path="res://elements/components/hitbox_component.tscn" id="3_p7vss"]
[ext_resource type="PackedScene" uid="uid://dveia3qqg10gs" path="res://ui/moving_healthbar/moving_healthbar.tscn" id="4_p7vss"]
[ext_resource type="AnimationNodeBlendSpace2D" uid="uid://bru33q5srwj5r" path="res://elements/entities/player/animations/player_run_blend.tres" id="5_5j20d"]
[ext_resource type="Script" uid="uid://cggq3uo0nt2q" path="res://elements/entities/player/player_animation.gd" id="6_b0a01"]

[sub_resource type="PortableCompressedTexture2D" id="PortableCompressedTexture2D_wk5ms"]
_data = PackedByteArray("AAADAAUAAAABAAAAQAAAAEAAAABGBAAAUklGRj4EAABXRUJQVlA4TDIEAAAvP8APEN/BOJJsJbvfcJez558CAXFyhzTYRrat5H7/H8s0ZIiogO4pg5jc3YVxJNlKVnB3yD8V0uHmJz6DtpEceY7BV/74+hN4TQDo/wdlliEh0sDYBiDKsCQEIAB+LeKxrpn9fFMlRflbnAqAAvhIOLmq9vd51NGYK7bP14gngzMugEP96S7jMxR/QzHld58KSkbHEr9ljMR+DcD7lNukWUowkcSkEH4ipUlmgogRidSbGZ0QREiJIBIi6MFnKHZjfZjGEyhq29u2rew2v052mL2XJJxKTeipmh64/wsjQUBWbiCi/xDctpEkKUnvZk51z4wfwakgilP9hEfBQCk2LoSW5sH9PU7EplBSrDJH8+DeHieiNA8SFTE8bC8dCgYjolHC8DC9LOgnDv2Xn7/57gGl0LorFNFMs7+H8ffOh+C9cz5nFkKYXgFnkjMgBH9zM1OYXl5chGnGLZDGB+BWespRLjT+J/gb78NZ5oEwvZyGAOmVBMUQ5SJxpqAypyTc+BByrapapl5WFSQl4gSUOWW4moagLmJCqRI7kS1OlLLgStRZzpn0gLJcisqWonhdfz09fa1fi/xpoX16/vWblfr96/mpDZpH2263bZtbHL1L3o9Y4ymO2k/7cXx4+Ph4eHicY2QEazKGAoABc4b7etg5YnkYYlTXusdp8rB/h7aHClEUtT3sHLE8LEb0UZseFmRC9uGttj0GX8C2x4Aw8Almy2O32xmiYO7vweOxcy8qnXMN73ZWjmhMry0PjL3b6Lg/TaeeV54jWq5cT0NQL3OcjfE9bLpOfUhIjTxHqko2FD6c34AoF0kK3eJNJbVBavU83bkDfSjUBOfUJc8RK1f0h9yPYSyrf923ngPJhVWv5GLhFSnmyV/m1UrrvjmhO+w0GBPhoH4uBwd9ODgwg8I8JZhagK0xrIeVI6hrAnhPj1Nw/xxJWkTg/T2sHNH5oFFkfw8rR3TexHnu77FPrtRENIDHPjnCUUPTikI9PfQc6bqGNV6cG49VuOm6zvBwrtP/j+NYq5eN82P9xFxs/aW65o/T74/TsCIGbGKTpsFNbNJE6q5rAPVTaFyzQC6WBDbefYAVjUXjGqoV3hZdstQWFwt1zgeJoOGcWnjpi3Mwviir1byBuiAGhfqxoJmvVqzVd/dvpVmmYW4mjSbmVYSSdEM2yeHvJPeAPKcJdHb6ZYqKqZUzDcJNERWKRjDksWCJ7ePRL3fAQ1XBQCk2LvI5EduAlBSr1DgRNRjMIFE6FAZmRDSyoJ84/NyyM2/eDU9sMXcZqQfd73wI3jvnM9hPry8uwtQPxS2QxgfgNvvahen1NARguEcjTZ4kqKpl6mVVYShKxAkoVWInBlucqHzJPQZbiuJ7/fX09LV+LfJcadvttm2Zh+ojSLQckUSPoTg+PHx8PDz87ygHkI8bAgY=")
size_override = Vector2(64, 64)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_sfv1e"]
radius = 6.0
height = 14.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5j20d"]
animation = &"idle_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b0a01"]
animation = &"idle_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a555w"]
animation = &"idle_up"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_knhn6"]
animation = &"idle_down"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_b0a01"]
blend_point_0/node = SubResource("AnimationNodeAnimation_5j20d")
blend_point_0/pos = Vector2(-1, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_b0a01")
blend_point_1/pos = Vector2(1, 0)
blend_point_2/node = SubResource("AnimationNodeAnimation_a555w")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_knhn6")
blend_point_3/pos = Vector2(0, 1)
blend_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5j20d"]
advance_mode = 2
advance_expression = "!velocity"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b0a01"]
advance_mode = 2
advance_expression = "velocity"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a555w"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_p7vss"]
states/Idle/node = SubResource("AnimationNodeBlendSpace2D_b0a01")
states/Idle/position = Vector2(504, 165)
states/Run/node = ExtResource("5_5j20d")
states/Run/position = Vector2(504, 77)
states/Start/position = Vector2(297, 115)
transitions = ["Run", "Idle", SubResource("AnimationNodeStateMachineTransition_5j20d"), "Idle", "Run", SubResource("AnimationNodeStateMachineTransition_b0a01"), "Start", "Idle", SubResource("AnimationNodeStateMachineTransition_a555w")]

[sub_resource type="Animation" id="Animation_iivwj"]
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [12]
}

[sub_resource type="Animation" id="Animation_aobtl"]
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}

[sub_resource type="Animation" id="Animation_ly8gd"]
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [9]
}

[sub_resource type="Animation" id="Animation_p71k5"]
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [13]
}

[sub_resource type="Animation" id="Animation_5j20d"]
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 0, 2]
}

[sub_resource type="Animation" id="Animation_a555w"]
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [6, 7, 6, 8]
}

[sub_resource type="Animation" id="Animation_knhn6"]
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [9, 10, 9, 11]
}

[sub_resource type="Animation" id="Animation_b0a01"]
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [3, 4, 3, 5]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_iivwj"]
_data = {
&"idle_down": SubResource("Animation_iivwj"),
&"idle_left": SubResource("Animation_aobtl"),
&"idle_right": SubResource("Animation_ly8gd"),
&"idle_up": SubResource("Animation_p71k5"),
&"run_down": SubResource("Animation_5j20d"),
&"run_left": SubResource("Animation_a555w"),
&"run_right": SubResource("Animation_knhn6"),
&"run_up": SubResource("Animation_b0a01")
}

[node name="Player" type="CharacterBody2D" groups=["player"]]
script = ExtResource("1_symyc")
max_hunger = 10

[node name="Sprite" type="Sprite2D" parent="."]
texture_filter = 1
texture = SubResource("PortableCompressedTexture2D_wk5ms")
hframes = 4
vframes = 4
frame = 6
metadata/_aseprite_wizard_interface_config_ = {
"pending_changes": {}
}
metadata/_aseprite_wizard_config_ = {
"embed_tex": true,
"i_mode": 0,
"keep_anim_length": false,
"layers": [],
"o_ex_p": "",
"o_folder": "",
"o_name": "",
"only_visible": false,
"player": "AnimationPlayer",
"slice": "",
"source": "res://assets/sprites/player/player.ase"
}
metadata/_aseprite_wizard_source_file_hash_ = "566a75e7c859d2592c2208f35fab2bcc"

[node name="CollisionShape" type="CollisionShape2D" parent="."]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_sfv1e")

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true

[node name="HeathComponent" parent="." instance=ExtResource("2_wgaw1")]

[node name="HitboxComponent" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("3_p7vss")]
health_component = NodePath("../HeathComponent")

[node name="HitboxShape" type="CollisionShape2D" parent="HitboxComponent"]
position = Vector2(0, -2)
shape = SubResource("CapsuleShape2D_sfv1e")

[node name="MovingHealthBar" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("4_p7vss")]
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = -11.0
offset_top = -25.0
offset_right = 11.0
offset_bottom = -24.0
grow_horizontal = 1
grow_vertical = 1
health_component = NodePath("../HeathComponent")
metadata/_edit_use_anchors_ = true

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_p7vss")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/Idle/blend_position = Vector2(0, 0)
parameters/Run/blend_position = Vector2(0, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_iivwj")
}

[node name="PlayerAnimation" type="Node2D" parent="." node_paths=PackedStringArray("animation_tree")]
script = ExtResource("6_b0a01")
animation_tree = NodePath("../AnimationTree")

[connection signal="health_changed" from="HeathComponent" to="." method="_on_heath_component_health_changed"]
